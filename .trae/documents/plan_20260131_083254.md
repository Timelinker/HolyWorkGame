## 银行功能实现计划

### 1. 创建银行弹窗场景

* 创建 `scenes/ui/bank/bank_popup.tscn` 场景文件

* 设计贷款和还款选项的UI布局

* 贷款界面显示3个档位的贷款选项：50W1年(4.8%)、100W3年(4.2%)、300W5年(3.5%)

* 还款界面暂时留空，仅添加标签

### 2. 创建银行弹窗脚本

* 创建 `scripts/ui/bank/bank_popup.gd` 脚本文件

* 实现贷款功能逻辑：选择档位后增加金钱总数

* 根据利率计算每日需要还的利息金额，并加到每日消耗上

* 实现弹窗的显示和隐藏逻辑

* 添加与主界面的信号连接

### 3. 在主界面上添加银行按钮

* 修改 `scenes/mainScene/main_scene.tscn` 文件，在SafeArea2D节点下添加银行按钮

* 设置按钮的位置、大小和样式，与现有按钮保持一致

* 绑定按钮的点击事件

### 4. 修改主界面脚本

* 修改 `scripts/WorkLogic.gd` 文件，添加银行按钮的点击事件处理

* 实现银行弹窗的显示逻辑

* 确保银行按钮与其他按钮的交互正常

### 5. 修改属性系统

* 修改 `scripts/attributes/simple_player_attributes.gd` 文件，添加贷款相关的属性和方法

* 增加贷款金额、每日利息等属性

* 修改每日消耗的计算逻辑，包括贷款利息

### 6. 测试和调试

* 测试银行按钮的显示和点击功能

* 测试贷款功能的逻辑正确性

* 验证金钱和每日消耗的计算是否准确

* 确保与其他系统的交互正常

### 技术实现细节

* 贷款档位数据：使用字典存储贷款金额、期限、利率等信息

* 利息计算：根据贷款金额和利率计算每日利息

* 每日消耗：将贷款利息加到每日消耗中，随游戏天数自动扣除

* 弹窗管理：参考现有的shop\_popup实现方式

* 信号系统：使用Godot的信号系统实现按钮点击和弹窗关闭的通信

### 预期效果

* 主界面上新增银行按钮，点击后弹出银行弹窗

* 贷款界面显示3个档位的贷款选项，选择后增加金钱并开始计算利息

* 每日消耗中包含贷款利息，随游戏天数自动扣除

* 还款界面暂时留空，后续可扩展实现

