# 游戏结局系统实现计划

## 实现目标

创建一个结局场景系统，包含三个结局：

1. **结局1**：角色35岁时，职位低于产品总监 → 失败结局1
2. **结局2**：金钱<0时 → 失败结局2，破产
3. **结局3**：角色35岁时，职位高于等于产品总监 → 游戏胜利

## 实现步骤

### 1. 创建结局场景

* 创建三个结局场景文件：

  * `endings/failure_ending1.tscn`（失败结局1：职位不足）

  * `endings/failure_ending2.tscn`（失败结局2：破产）

  * `endings/success_ending.tscn`（成功结局：职位达标）

* 每个场景包含相应的文本描述和重新开始按钮

### 2. 修改属性系统

* 在 `simple_player_attributes.gd` 中添加结局判断逻辑：

  * 添加 `check_endings()` 函数，检查是否触发结局

  * 添加 `is_game_ended` 变量，标记游戏是否结束

  * 修改 `increase_year()` 函数，在年龄变化时检查结局条件

  * 修改 `set_money()` 函数，在金钱变化时检查破产条件

### 3. 修改 WorkLogic.gd

* 添加结局场景管理：

  * 在 `_ready()` 函数中加载结局场景

  * 添加 `show_ending()` 函数，显示相应的结局场景

  * 在 `_process()` 函数中检查游戏是否结束，结束则暂停时间

### 4. 结局触发逻辑

* **结局1**：当角色年龄达到35岁且职位等级低于16（产品总监）时触发

* **结局2**：当金钱小于0时立即触发

* **结局3**：当角色年龄达到35岁且职位等级大于等于16（产品总监）时触发

### 5. 重新开始功能

* 在每个结局场景中添加重新开始按钮

* 实现重新开始逻辑，重置游戏状态并返回主场景

## 技术要点

* 使用 Godot 的场景系统管理结局场景

* 通过信号系统通知主逻辑结局触发

* 确保结局判断逻辑在适当的时机执行

* 实现游戏状态的正确管理和重置

## 预期效果

* 游戏会在达到相应条件时自动触发对应的结局

* 结局场景会显示相应的文本描述

* 玩家可以通过重新开始按钮再次开始游戏

* 游戏状态会正确重置到初始状态

